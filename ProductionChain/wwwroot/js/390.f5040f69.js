"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[390],{6390:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var r=s(6768),o=s(5130),i=s(4232);const a=["onClick"],l=["onClick"];function c(t,e,s,c,h,n){const m=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),u=(0,r.g2)("v-text-field"),g=(0,r.g2)("v-data-table"),p=(0,r.g2)("v-card-title"),k=(0,r.g2)("v-card-text"),f=(0,r.g2)("v-card"),_=(0,r.g2)("v-col"),v=(0,r.g2)("v-row"),$=(0,r.g2)("v-container"),y=(0,r.g2)("v-pagination");return(0,r.uX)(),(0,r.Wv)(f,{title:"Продкуция",flat:""},{text:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:h.term,"onUpdate:modelValue":e[0]||(e[0]=t=>h.term=t),label:"Найти",autocomplete:"off","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",onKeyup:(0,o.jR)(n.search,["enter"])},{"append-inner":(0,r.k6)((()=>[(0,r.bF)(d,{icon:"",onClick:n.search,color:"primary",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(m,null,{default:(0,r.k6)((()=>e[3]||(e[3]=[(0,r.eW)("mdi-magnify")]))),_:1,__:[3]})])),_:1},8,["onClick"]),(0,r.bF)(m,{onClick:n.cancelSearch,style:{cursor:"pointer"},size:"x-large",class:"ms-1 me-2"},{default:(0,r.k6)((()=>e[4]||(e[4]=[(0,r.eW)(" mdi-close-circle ")]))),_:1,__:[4]},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])),default:(0,r.k6)((()=>[n.isAuthorized?((0,r.uX)(),(0,r.Wv)(g,{key:0,headers:h.headers,items:n.products,"hide-default-footer":"",loading:n.isLoading,"items-per-page":n.itemsPerPage,"no-data-text":"Список пуст"},{["header.name"]:(0,r.k6)((({column:t})=>[(0,r.Lk)("button",{onClick:e=>n.sortBy(t)},(0,i.v_)(t.title),9,a),h.sortByColumn===t.value?((0,r.uX)(),(0,r.Wv)(m,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["header.model"]:(0,r.k6)((({column:t})=>[(0,r.Lk)("button",{onClick:e=>n.sortBy(t)},(0,i.v_)(t.title),9,l),h.sortByColumn===t.value?((0,r.uX)(),(0,r.Wv)(m,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),_:2},1032,["headers","items","loading","items-per-page"])):((0,r.uX)(),(0,r.Wv)($,{key:1,class:"fill-height",fluid:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,{align:"center",justify:"center"},{default:(0,r.k6)((()=>[(0,r.bF)(_,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"text-center pa-8"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:(0,r.k6)((()=>e[5]||(e[5]=[(0,r.eW)(" mdi-account-lock ")]))),_:1,__:[5]}),(0,r.bF)(p,{class:"text-h5 justify-center"},{default:(0,r.k6)((()=>e[6]||(e[6]=[(0,r.eW)(" Требуется авторизация ")]))),_:1,__:[6]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[e[8]||(e[8]=(0,r.Lk)("p",{class:"text-body-1 mb-4"}," Для просмотра этой страницы необходимо войти в систему ",-1)),(0,r.bF)(d,{color:"primary",onClick:e[1]||(e[1]=t=>n.showLoginModal())},{default:(0,r.k6)((()=>e[7]||(e[7]=[(0,r.eW)(" Войти ")]))),_:1,__:[7]})])),_:1,__:[8]})])),_:1})])),_:1})])),_:1})])),_:1})),(0,r.bF)(y,{modelValue:h.currentPage,"onUpdate:modelValue":[e[2]||(e[2]=t=>h.currentPage=t),n.switchPage],length:n.pagesCount,circle:"",color:"primary"},null,8,["modelValue","length","onUpdate:modelValue"])])),_:1})}var h={data(){return{term:"",isSearchMode:!1,currentPage:1,sortByColumn:"",sortDesc:!1,headers:[{value:"index",title:"№"},{value:"name",title:"Название"},{value:"model",title:"Модель"}]}},created(){this.isAuthorized&&this.loadData()},computed:{products(){return this.$store.getters.products},itemsPerPage(){return this.$store.getters.pageSize},pagesCount(){return Math.ceil(this.$store.getters.pageItemsCount/this.itemsPerPage)},isLoading(){return this.$store.getters.isLoading},isAuthorized(){return this.$store.getters.isAuthorized}},methods:{loadData(){this.$store.commit("setSearchParameters",this.term),this.$store.dispatch("loadProducts").catch((t=>{401===t.status?(this.$store.commit("setAlertMessage","Ошибка! Вы не авторизованы."),this.$store.dispatch("clearAuthData"),this.$store.commit("isShowErrorAlert",!0)):403===t.status?(this.$store.commit("setAlertMessage","У вас нет прав для получения данной информации."),this.$store.commit("isShowErrorAlert",!0)):(this.$store.commit("setAlertMessage","Не удалось загрузить список продукции"),this.$store.commit("isShowErrorAlert",!0))}))},search(){0!==this.term.length&&(this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!0,this.$store.dispatch("loadProducts").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список продукции"),this.$store.commit("isShowErrorAlert",!0)})))},cancelSearch(){this.isSearchMode&&(this.term="",this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!1,this.$store.dispatch("loadProducts").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список продукции"),this.$store.commit("isShowErrorAlert",!0)})))},sortBy(t){this.sortByColumn===t.value?this.sortDesc=!this.sortDesc:(this.sortDesc=!1,this.sortByColumn=t.value),this.$store.commit("setSortingParameters",{sortBy:this.sortByColumn,isDesc:this.sortDesc}),this.$store.dispatch("loadProducts").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список продукции"),this.$store.commit("isShowErrorAlert",!0)}))},switchPage(t){this.$store.commit("setPageNumber",t),this.$store.dispatch("loadProducts").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список продукции"),this.$store.commit("isShowErrorAlert",!0)}))},showSuccessAlert(t){this.alertText=t,this.isShowSuccessAlert=!0},showErrorAlert(t){this.alertText=t,this.isShowErrorAlert=!0},showLoginModal(){this.$store.commit("setIsShowLoginModal",!0)}}},n=s(1241);const m=(0,n.A)(h,[["render",c]]);var d=m}}]);
//# sourceMappingURL=390.f5040f69.js.map