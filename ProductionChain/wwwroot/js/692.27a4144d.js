"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[692],{2692:function(e,t,s){s.r(t),s.d(t,{default:function(){return k}});var r=s(6768),o=s(5130),l=s(4232);const i=["onClick"],a=["onClick"],n=["onClick"],u=["onClick"],c=["onClick"];function m(e,t,s,m,h,d){const p=(0,r.g2)("v-progress-linear"),k=(0,r.g2)("v-snackbar"),v=(0,r.g2)("v-icon"),g=(0,r.g2)("v-btn"),y=(0,r.g2)("v-text-field"),C=(0,r.g2)("v-chip"),f=(0,r.g2)("v-data-table"),_=(0,r.g2)("v-pagination"),w=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.Wv)(w,{title:"Сотрудники",flat:""},{text:(0,r.k6)((()=>[(0,r.bF)(y,{modelValue:h.term,"onUpdate:modelValue":t[2]||(t[2]=e=>h.term=e),label:"Найти",autocomplete:"off","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",onKeyup:(0,o.jR)(d.search,["enter"])},{"append-inner":(0,r.k6)((()=>[(0,r.bF)(g,{icon:"",onClick:d.search,color:"primary",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(v,null,{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("mdi-magnify")]))),_:1,__:[4]})])),_:1},8,["onClick"]),(0,r.bF)(v,{onClick:d.cancelSearch,style:{cursor:"pointer"},size:"x-large",class:"ms-1 me-2"},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)(" mdi-close-circle ")]))),_:1,__:[5]},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])),default:(0,r.k6)((()=>[d.isLoading?((0,r.uX)(),(0,r.Wv)(p,{key:0,indeterminate:"",color:"primary",height:"4"})):(0,r.Q3)("",!0),(0,r.bF)(k,{modelValue:h.isShowSuccessAlert,"onUpdate:modelValue":t[0]||(t[0]=e=>h.isShowSuccessAlert=e),timeout:2e3,color:"success"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.alertText),1)])),_:1},8,["modelValue"]),(0,r.bF)(k,{modelValue:h.isShowErrorAlert,"onUpdate:modelValue":t[1]||(t[1]=e=>h.isShowErrorAlert=e),timeout:2e3,color:"error"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.alertText),1)])),_:1},8,["modelValue"]),(0,r.bF)(f,{headers:h.headers,items:d.employees,"hide-default-footer":"","items-per-page":d.itemsPerPage,"no-data-text":"Список пуст"},{["header.lastName"]:(0,r.k6)((({column:e})=>[(0,r.Lk)("button",{onClick:t=>d.sortBy(e)},(0,l.v_)(e.title),9,i),h.sortByColumn===e.value?((0,r.uX)(),(0,r.Wv)(v,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["header.firstName"]:(0,r.k6)((({column:e})=>[(0,r.Lk)("button",{onClick:t=>d.sortBy(e)},(0,l.v_)(e.title),9,a),h.sortByColumn===e.value?((0,r.uX)(),(0,r.Wv)(v,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["header.middleName"]:(0,r.k6)((({column:e})=>[(0,r.Lk)("button",{onClick:t=>d.sortBy(e)},(0,l.v_)(e.title),9,n),h.sortByColumn===e.value?((0,r.uX)(),(0,r.Wv)(v,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["header.position"]:(0,r.k6)((({column:e})=>[(0,r.Lk)("button",{onClick:t=>d.sortBy(e)},(0,l.v_)(e.title),9,u),h.sortByColumn===e.value?((0,r.uX)(),(0,r.Wv)(v,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["header.status"]:(0,r.k6)((({column:e})=>[(0,r.Lk)("button",{onClick:t=>d.sortBy(e)},(0,l.v_)(e.title),9,c),h.sortByColumn===e.value?((0,r.uX)(),(0,r.Wv)(v,{key:0},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(h.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,r.Q3)("",!0)])),["item.status"]:(0,r.k6)((({value:e,item:t})=>[(0,r.bF)(C,{border:`${d.getColor(e)} thin opacity-25`,color:d.getColor(e),text:t.statusMap,size:"small"},null,8,["border","color","text"])])),_:2},1032,["headers","items","items-per-page"]),(0,r.bF)(_,{modelValue:h.currentPage,"onUpdate:modelValue":[t[3]||(t[3]=e=>h.currentPage=e),d.switchPage],length:d.pagesCount,circle:"",color:"primary"},null,8,["modelValue","length","onUpdate:modelValue"])])),_:1})}var h={data(){return{term:"",isSearchMode:!1,currentPage:1,sortByColumn:"lastName",sortDesc:!1,headers:[{value:"index",title:"№"},{value:"lastName",title:"Фамилия"},{value:"firstName",title:"Имя"},{value:"middleName",title:"Отчество"},{value:"positionMap",title:"Должность"},{value:"status",title:"Состояние"}],isShowSuccessAlert:!1,isShowErrorAlert:!1,alertText:""}},created(){this.$store.commit("setSearchParameters",this.term),this.$store.dispatch("loadEmployees").catch((e=>{401===e.status?(this.showErrorAlert("Ошибка! Вы не авторизованы."),this.$store.commit("setIsShowLoginModal",!0)):403===e.status?this.showErrorAlert("У вас нет прав для получения данной информации."):this.showErrorAlert("Ошибка! Не удалось загрузить список сотрудников.")}))},computed:{employees(){return this.$store.getters.employees},itemsPerPage(){return this.$store.getters.pageSize},pagesCount(){return Math.ceil(this.$store.getters.pageItemsCount/this.itemsPerPage)},isLoading(){return this.$store.getters.isLoading}},methods:{search(){0!==this.term.length&&(this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!0,this.$store.dispatch("loadEmployees").catch((()=>{this.showErrorAlert("Ошибка! Не удалось загрузить список сотрудников.")})))},cancelSearch(){this.isSearchMode&&(this.term="",this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!1,this.$store.dispatch("loadEmployees").catch((()=>{this.showErrorAlert("Ошибка! Не удалось загрузить список сотрудников.")})))},sortBy(e){this.sortByColumn===e.value?this.sortDesc=!this.sortDesc:(this.sortDesc=!1,this.sortByColumn=e.value),this.$store.commit("setSortingParameters",{sortBy:this.sortByColumn,isDesc:this.sortDesc}),this.$store.dispatch("loadEmployees").catch((()=>{this.showErrorAlert("Ошибка! Не удалось загрузить список сотрудников.")}))},getColor(e){return"OnLeave"===e?"error":"Busy"===e?"warning":"Available"===e?"success":void 0},switchPage(e){this.$store.commit("setPageNumber",e),this.$store.dispatch("loadEmployees").catch((()=>{this.showErrorAlert("Ошибка! Не удалось загрузить список сотрудников.")}))},showSuccessAlert(e){this.alertText=e,this.isShowSuccessAlert=!0},showErrorAlert(e){this.alertText=e,this.isShowErrorAlert=!0}}},d=s(1241);const p=(0,d.A)(h,[["render",m]]);var k=p}}]);
//# sourceMappingURL=692.27a4144d.js.map