"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[628],{628:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var s=r(6768),o=r(4232),i=r(5130);const a=["textContent"],l=["textContent"];function n(e,t,r,n,u,c){const h=(0,s.g2)("v-progress-linear"),d=(0,s.g2)("v-alert"),g=(0,s.g2)("v-chip"),m=(0,s.g2)("v-btn"),p=(0,s.g2)("v-data-table"),v=(0,s.g2)("v-pagination"),w=(0,s.g2)("v-card");return(0,s.uX)(),(0,s.Wv)(w,{title:"Заказы",flat:""},{default:(0,s.k6)((()=>[c.isLoading?((0,s.uX)(),(0,s.Wv)(h,{key:0,indeterminate:"",color:"primary",height:"4"})):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(d,{type:"success",variant:"outlined"},{text:(0,s.k6)((()=>[(0,s.Lk)("span",{textContent:(0,o.v_)(u.alertText)},null,8,a)])),_:1},512),[[i.aG,u.isShowSuccessAlert]]),(0,s.bo)((0,s.bF)(d,{type:"error",variant:"outlined"},{text:(0,s.k6)((()=>[(0,s.Lk)("span",{textContent:(0,o.v_)(u.alertText)},null,8,l)])),_:1},512),[[i.aG,u.isShowErrorAlert]]),(0,s.bF)(p,{headers:u.headers,items:c.orders,"hide-default-footer":"","items-per-page":c.itemsPerPage,"no-data-text":"Список пуст"},{["item.status"]:(0,s.k6)((({value:e})=>[(0,s.bF)(g,{border:`${c.getColor(e)} thin opacity-25`,color:c.getColor(e),text:e,size:"small"},null,8,["border","color","text"])])),["item.actions"]:(0,s.k6)((({item:e})=>[(0,s.Lk)("div",null,[e.inProgress?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(m,{key:0,size:"small",color:"info",onClick:t=>c.edit(e.id),class:"me-2"},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.eW)("Начать")]))),_:2,__:[1]},1032,["onClick"]))])])),_:2},1032,["headers","items","items-per-page"]),(0,s.bF)(v,{modelValue:u.currentPage,"onUpdate:modelValue":[t[0]||(t[0]=e=>u.currentPage=e),c.switchPage],length:c.pagesCount,circle:"",color:"primary"},null,8,["modelValue","length","onUpdate:modelValue"])])),_:1})}var u={data(){return{term:"",currentPage:1,sortByColumn:"name",sortDesc:!1,headers:[{value:"id",title:"№",width:"15%"},{value:"name",title:"Изделие",width:"25%"},{value:"count",title:"шт",width:"15%"},{value:"status",title:"Статус",width:"20%"},{value:"actions",title:"",width:"25%"}],isShowSuccessAlert:!1,isShowErrorAlert:!1,alertText:""}},created(){this.$store.dispatch("loadOrders").catch((()=>{this.showErrorAlert("Ошибка! Не удалось загрузить список заказов.")}))},computed:{orders(){return this.$store.getters.orders},itemsPerPage(){return this.$store.getters.pageSize},pagesCount(){return Math.ceil(this.$store.getters.pageItemsCount/this.itemsPerPage)},isLoading(){return this.$store.getters.isLoading}},methods:{getColor(e){return"в очереди"===e?"error":"выполняется"===e?"warning":"success"},edit(e){console.log(e)},switchPage(e){this.$store.dispatch("navigateToPage",e)},showSuccessAlert(e){this.alertText=e,this.isShowSuccessAlert=!0,setTimeout((()=>{this.alertText="",this.isShowSuccessAlert=!1}),2e3)},showErrorAlert(e){this.alertText=e,this.isShowErrorAlert=!0,setTimeout((()=>{this.alertText="",this.isShowErrorAlert=!1}),2e3)}}},c=r(1241);const h=(0,c.A)(u,[["render",n]]);var d=h}}]);
//# sourceMappingURL=628.4b761450.js.map