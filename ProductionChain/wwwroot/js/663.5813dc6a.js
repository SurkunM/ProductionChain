"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[663],{8663:function(e,t,s){s.r(t),s.d(t,{default:function(){return k}});var o=s(6768),r=s(5130),i=s(4232);const a=["onClick"],l=["onClick"],m=["onClick"],c=["onClick"],n=["onClick"];function u(e,t,s,u,d,h){const g=(0,o.g2)("v-icon"),k=(0,o.g2)("v-btn"),p=(0,o.g2)("v-text-field"),v=(0,o.g2)("v-chip"),y=(0,o.g2)("v-data-table"),_=(0,o.g2)("v-card-title"),f=(0,o.g2)("v-card-text"),C=(0,o.g2)("v-card"),$=(0,o.g2)("v-col"),b=(0,o.g2)("v-row"),w=(0,o.g2)("v-container"),A=(0,o.g2)("v-pagination");return(0,o.uX)(),(0,o.Wv)(C,{title:"Сотрудники",flat:""},{text:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:d.term,"onUpdate:modelValue":t[0]||(t[0]=e=>d.term=e),label:"Найти",autocomplete:"off","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",onKeyup:(0,r.jR)(h.search,["enter"])},{"append-inner":(0,o.k6)((()=>[(0,o.bF)(k,{icon:"",onClick:h.search,color:"primary",size:"small"},{default:(0,o.k6)((()=>[(0,o.bF)(g,null,{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("mdi-magnify")]))),_:1,__:[3]})])),_:1},8,["onClick"]),(0,o.bF)(g,{onClick:h.cancelSearch,style:{cursor:"pointer"},size:"x-large",class:"ms-1 me-2"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)(" mdi-close-circle ")]))),_:1,__:[4]},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])),default:(0,o.k6)((()=>[h.isAuthorized?((0,o.uX)(),(0,o.Wv)(y,{key:0,headers:d.headers,items:h.employees,"hide-default-footer":"",loading:h.isLoading,"items-per-page":h.itemsPerPage,"no-data-text":"Список пуст"},{["header.lastName"]:(0,o.k6)((({column:e})=>[(0,o.Lk)("button",{onClick:t=>h.sortBy(e)},(0,i.v_)(e.title),9,a),d.sortByColumn===e.value?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(d.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,o.Q3)("",!0)])),["header.firstName"]:(0,o.k6)((({column:e})=>[(0,o.Lk)("button",{onClick:t=>h.sortBy(e)},(0,i.v_)(e.title),9,l),d.sortByColumn===e.value?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(d.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,o.Q3)("",!0)])),["header.middleName"]:(0,o.k6)((({column:e})=>[(0,o.Lk)("button",{onClick:t=>h.sortBy(e)},(0,i.v_)(e.title),9,m),d.sortByColumn===e.value?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(d.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,o.Q3)("",!0)])),["header.position"]:(0,o.k6)((({column:e})=>[(0,o.Lk)("button",{onClick:t=>h.sortBy(e)},(0,i.v_)(e.title),9,c),d.sortByColumn===e.value?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(d.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,o.Q3)("",!0)])),["header.status"]:(0,o.k6)((({column:e})=>[(0,o.Lk)("button",{onClick:t=>h.sortBy(e)},(0,i.v_)(e.title),9,n),d.sortByColumn===e.value?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(d.sortDesc?"mdi-menu-up":"mdi-menu-down"),1)])),_:1})):(0,o.Q3)("",!0)])),["item.status"]:(0,o.k6)((({value:e,item:t})=>[(0,o.bF)(v,{border:`${h.getColor(e)} thin opacity-25`,color:h.getColor(e),text:t.statusMap,size:"small"},null,8,["border","color","text"])])),_:2},1032,["headers","items","loading","items-per-page"])):((0,o.uX)(),(0,o.Wv)(w,{key:1,class:"fill-height",fluid:""},{default:(0,o.k6)((()=>[(0,o.bF)(b,{align:"center",justify:"center"},{default:(0,o.k6)((()=>[(0,o.bF)($,{cols:"12",sm:"8",md:"6",lg:"4"},{default:(0,o.k6)((()=>[(0,o.bF)(C,{class:"text-center pa-8"},{default:(0,o.k6)((()=>[(0,o.bF)(g,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)(" mdi-account-lock ")]))),_:1,__:[5]}),(0,o.bF)(_,{class:"text-h5 justify-center"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)(" Требуется авторизация ")]))),_:1,__:[6]}),(0,o.bF)(f,null,{default:(0,o.k6)((()=>[t[8]||(t[8]=(0,o.Lk)("p",{class:"text-body-1 mb-4"}," Для просмотра этой страницы необходимо войти в систему ",-1)),(0,o.bF)(k,{color:"primary",onClick:t[1]||(t[1]=e=>h.showLoginModal())},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" Войти ")]))),_:1,__:[7]})])),_:1,__:[8]})])),_:1})])),_:1})])),_:1})])),_:1})),(0,o.bF)(A,{modelValue:d.currentPage,"onUpdate:modelValue":[t[2]||(t[2]=e=>d.currentPage=e),h.switchPage],length:h.pagesCount,circle:"",color:"primary"},null,8,["modelValue","length","onUpdate:modelValue"])])),_:1})}var d={data(){return{term:"",isSearchMode:!1,currentPage:1,sortByColumn:"lastName",sortDesc:!1,headers:[{value:"index",title:"№"},{value:"lastName",title:"Фамилия"},{value:"firstName",title:"Имя"},{value:"middleName",title:"Отчество"},{value:"positionMap",title:"Должность"},{value:"status",title:"Состояние"}]}},created(){this.isAuthorized&&this.loadData()},computed:{employees(){return this.$store.getters.employees},itemsPerPage(){return this.$store.getters.pageSize},pagesCount(){return Math.ceil(this.$store.getters.pageItemsCount/this.itemsPerPage)},isLoading(){return this.$store.getters.isLoading},isAuthorized(){return this.$store.getters.isAuthorized}},methods:{loadData(){this.$store.commit("setSearchParameters",this.term),this.$store.dispatch("loadEmployees").catch((e=>{401===e.status?(this.$store.commit("setAlertMessage","Вы не авторизованы"),this.$store.dispatch("clearAuthData"),this.$store.commit("isShowErrorAlert",!0)):403===e.status?(this.$store.commit("setAlertMessage","У вас нет недостаточно прав для простомтра"),this.$store.commit("isShowErrorAlert",!0)):(this.$store.commit("setAlertMessage","Не удалось загрузить список сотрудников"),this.$store.commit("isShowErrorAlert",!0))}))},search(){0!==this.term.length&&(this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!0,this.$store.dispatch("loadEmployees").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список сотрудников"),this.$store.commit("isShowErrorAlert",!0)})))},cancelSearch(){this.isSearchMode&&(this.term="",this.$store.commit("setSearchParameters",this.term),this.isSearchMode=!1,this.$store.dispatch("loadEmployees").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список сотрудников"),this.$store.commit("isShowErrorAlert",!0)})))},sortBy(e){this.sortByColumn===e.value?this.sortDesc=!this.sortDesc:(this.sortDesc=!1,this.sortByColumn=e.value),this.$store.commit("setSortingParameters",{sortBy:this.sortByColumn,isDesc:this.sortDesc}),this.$store.dispatch("loadEmployees").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список сотрудников"),this.$store.commit("isShowErrorAlert",!0)}))},getColor(e){return"OnLeave"===e?"error":"Busy"===e?"warning":"Available"===e?"success":void 0},switchPage(e){this.$store.commit("setPageNumber",e),this.$store.dispatch("loadEmployees").catch((()=>{this.$store.commit("setAlertMessage","Не удалось загрузить список сотрудников"),this.$store.commit("isShowErrorAlert",!0)}))},showLoginModal(){this.$store.commit("setIsShowLoginModal",!0)}}},h=s(1241);const g=(0,h.A)(d,[["render",u]]);var k=g}}]);
//# sourceMappingURL=663.5813dc6a.js.map